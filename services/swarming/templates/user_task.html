{% extends "base.html" %}

{% block headers %}
<style>
  table.property_table {
    font-family: monospace;
    border-spacing: 0;
  }
  table.property_table tbody tr:nth-child(even) {
    background-color: #eeeeee;
  }
  table.property_table td {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }
  table.property_table tbody tr:hover {
    background-color: #eeffee;
  }
  table.property_table tbody tr td:first-child {
    white-space: nowrap;
  }
</style>
{% endblock %}


{% block floating %}
<br>{{now|datetimeformat}}
{% endblock %}


{% block body %}
{% import 'bot_view.html' as bot_view %}

<h1>Task summary</h1>
<table class="property_table">
  <tbody>
    <tr>
      <td>Name</td>
      <td>{{request.name}}</td>
    </tr>
    <tr>
      <td>User</td>
      <td>{{request.user}}</td>
    </tr>
    <tr>
      <td>Priority</td>
      <td>{{request.priority}}</td>
    </tr>
    <tr>
      <td>Request dimensions</td>
      <td>{{bot_view.render_dimensions(request.properties.dimensions)}}</td>
    </tr>
    <tr>
      <td>Execution timeout (s)</td>
      <td>{{request.properties.execution_timeout_secs}}</td>
    </tr>
    <tr>
      <td>I/O timeout (s)</td>
      <td>{{request.properties.io_timeout_secs}}</td>
    </tr>
    <tr>
      <td>Environment variables</td>
      <td>
        {% for k, v in request.properties.env.iteritems()|sort %}
        {{k}}: {{v}}<br>
        {% endfor %}
      </td>
    </tr>
    <tr>
      <td>Commands</td>
      <td>
        {% for cmd in request.properties.commands %}
        {{cmd|join(' ')}}<br>
        {% endfor %}
      </td>
    </tr>
    <tr>
      <td>Created</td>
      <td>{{request.created_ts|datetimeformat}}</td>
    </tr>
    <tr>
      <td>Expiration</td>
      <td>{{request.expiration_ts|datetimeformat}}</td>
    </tr>
    <tr>
      <td>Started</td>
      <td>{{task.started_ts|datetimeformat}}</td>
    </tr>
    <tr>
      <td>Pending time</td>
      <td>{{task.pending|timedeltaformat}}</td>
    </tr>
    <tr>
      <td>Completed</td>
      <td>{{task.completed_ts|datetimeformat}}</td>
    </tr>
    <tr>
      <td>Abandoned</td>
      <td>{{task.abandoned_ts|datetimeformat}}</td>
    </tr>
    <tr>
      <td>Duration</td>
      <td>{{task.duration()|timedeltaformat}}</td>
    </tr>
    <tr>
      <td>State</td>
      <td>{{task.to_string()}} ({{task.state}})</td>
    </tr>
    <tr>
      <td>Bot</td>
      <td>{{bot_view.bot_link(task.bot_id, is_privileged_user)}}</td>
    </tr>
    <tr>
      <td>Bot dimensions</td>
      <td>{{bot_view.bot_dimensions(bot)}}</td>
    </tr>
    <tr>
      <td>Failure</td>
      <td>{{task.failure}}</td>
    </tr>
    <tr>
      <td>Internal failure</td>
      <td>{{task.internal_failure}}</td>
    </tr>
    <tr>
      <td>Exit codes</td>
      <td>{{task.exit_codes}}</td>
    </tr>
    <tr>
      <td>Try number</td>
      <td>{{task.try_number}}</td>
    </tr>
  </tbody>
</table>

<h3>Outputs:</h3>
<pre>
{% for out in task.get_outputs() %}Output:
{{out}}{% endfor %}
</pre>

{% endblock %}
