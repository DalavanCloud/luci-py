<!--
  Copyright 2016 The LUCI Authors. All rights reserved.
  Use of this source code is governed under the Apache License, Version 2.0
  that can be found in the LICENSE file.

  This in an HTML Import-able file that contains the definition
  of the following elements:

    <swarming-index>

  Usage:

    <swarming-index></swarming-index>

  Properties:
    None.

  Methods:
    None.

  Events:
    None.
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="../common/auth-signin.html">

<dom-module id="swarming-index">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <h1>HELLO WORLD<h1>

    <!-- TODO(kjlubick) Remove this hard-coded client-id.-->
    <auth-signin
      auth-headers="{{auth}}"
      client-id="20770472288-t5smpbpjptka4nd888fv0ctd23ftba2o.apps.googleusercontent.com"
      on-auth-signin="signIn">
    </auth-signin>

    <iron-ajax id="request"
      url="/_ah/api/swarming/v1/server/details"
      headers="[[auth]]"
      handle-as="json"
      on-response="handleResponse">
    </iron-ajax>

  </template>
  <script>
    Polymer({
      is: 'swarming-index',

      signIn: function(){
        this.$.request.generateRequest();
      },

      handleResponse: function(a,b){
        console.log(this.$.request.lastResponse);
      }
    });
  </script>
</dom-module>